---
title: "R Markdown"
subtitle: "Introdu√ß√£o, aplica√ß√µes e extens√µes"
author: "Anderson Neisse"
date: "Slides em: bit.ly/2ZqczbW"
bibliography: referencias.bib
output:
  xaringan::moon_reader:
    self_contained: true
    lib_dir: libs
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
---

```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
library(tidyverse)
```

# Pacotes necess√°rios

Basta rodar este c√≥digo em algum script do R:

```{r, eval=FALSE}
# Pacotes necess√°rios para o curso
pacotes <- c("tidyverse", "rmarkdown", "blogdown", 
             "bookdown", "tufte", "rticles", "htmlwidgets", 
             "DT", "plotly", "leaflet", "xaringan")

install.packages(pacotes)
```

---

# O que √©? 

.pull-left[
- Pacote que gera documentos;

- Mistura:

  - C√≥digos e resultados do R;
  
  - Texto: LaTeX, Markdown.
  
- Permite criar:

  - Documentos interativos;
  
  - Sites (`blogdown`);
  
  - Dashboards (`shiny`);
  
  - [Muitos outros](https://rmarkdown.rstudio.com/gallery.html).
]

.pull-right[
![image](http://hexb.in/vector/rmarkdown.svg)
]

[Markdown](https://en.wikipedia.org/wiki/Markdown) √© uma linguagem para f√°cil escrita de documentos em HTML.

---
# Onde vive? 

.pull-left[
![image](http://hexb.in/vector/rstudio.svg)
]

.pull-right[
- Pacote criado pelo [RStudio](https://www.rstudio.com/);


- Lan√ßado em 17/Set/2014;


- Hospedagem: 
  - CRAN;
  
  - [Github](https://github.com/rstudio/rmarkdown);
  
- [R Markdown: The Definitive Guide](https://bookdown.org/yihui/rmarkdown/):
  - Livro detalhado;
  
  - Autora do pacote.
]

N√£o √© necess√°rio o RStudio para usar o `rmarkdown`. 

Mas seu uso facilita muito cria√ß√£o de documentos.

---
# Do que se alimeta?

.pull-left[
- Com o `knitr` mistura:
  - Textos em Markdown;
  
  - Textos em LaTeX;
  
  - Resultados e C√≥digos R;
  
  - Tamb√©m outras linguagens.
  

- Usa pandoc para gerar formatos como
  - HTML5;
  
  - PDF;
  
  - MSOffice;
  
  - [E outros](https://rmarkdown.rstudio.com/formats.html).
]

.pull-right[
![image](http://hexb.in/vector/knitr.svg)
]

[Pandoc](https://pandoc.org/) √© um conversor de documentos gratuito e de c√≥digo aberto.

---

# Em resumo:

A id√©ia base √© simples:
  
  - Intercalar narrativa com c√≥digo em um documento;
  
  - "Tricotar" o documento gerando resultados a partir do c√≥digo;

--
  
Entretanto esta id√©ia n√£o foi criada pelo `rmarkdown`:

  - Surgiu de um paradigma de programa√ß√£o por Knuth (1984);
  
  - Termo: Programa√ß√£o Literal (*Literate Programming*).

--

Outras ferramentas tamb√©m usam, como o [Jupyter Notebook](https://jupyter.org/) (Python).

```{r, echo=FALSE, out.height=170, out.width=400, fig.align='center'}
knitr::include_graphics("C:/Scripts R/aneisse/slides/rmd-tutorial/img/python-modules.png")
```


---
class: inverse, center, middle

# Use cases

### Como R Markdown se faz √∫til?

---

# Airbnb

Documentam todas as an√°lises em R com o R Markdown. 
 
Relat√≥rios finais s√£o revisados e mantidos em reposit√≥rio de conhecimento.
  
```{r, out.height=180, out.width=150, echo=FALSE, fig.align='center'}
knitr::include_graphics("https://logodownload.org/wp-content/uploads/2016/10/Airbnb-Logo-9.png")
```
--


Todas as √°reas podem consultar, analisar e reproduzir resultados passados.

Tamb√©m permite aos Cientistas de Dados a:
  - Aprenderem com an√°lises anteriores;
  
  - Reproduzirem resultados.

Mais detalhes nesse [post](https://medium.com/airbnb-engineering/using-r-packages-and-education-to-scale-data-science-at-airbnb-906faa58e12d).


---

# E-mails personalizados

O R Markdown permite gerar relat√≥rios com programa√ß√£o!

**Mine √áetinkaya-Rundel** criou mensagens personalizadas para um Workshop.


```{r, out.height=200, out.width=350, echo=FALSE, fig.align='center'}
#knitr::include_graphics("https://imageog.flaticon.com/icons/png/512/60/60543.png?size=1200x630f&pad=10,10,10,10&ext=png&bg=FFFFFFFF")
```

--

Ela usou um template em R Markdown dentro de um `for()` e gerou 20 PDFs.

Cada um com informa√ß√µes individuais e comuns entre os participantes.

--

Detalhes t√©cnicos de como ela fez [aqui](https://rmarkdown.rstudio.com/articles_mail_merge.html)!

---

# Outros

### Artigos Cient√≠ficos

Chris Hartgerink escreveu um [post](https://elifesciences.org/labs/cad57bcf/composing-reproducible-manuscripts-using-r-markdown) explicando como gerou um artigo dinamicamente com R Markdown e muito LaTeX.

--

### Livros (`bookdown`)

  - [R for Data Science](https://r4ds.had.co.nz/) - Introduz o R na abordagem "`tidyverse`" para an√°lise de dados;
  - [Advanced R](https://adv-r.hadley.nz/) - Base e conceitos avan√ßados em R;
  - [Text Mining with R](https://www.tidytextmining.com/) - T√©cnicas de extra√ß√£o de informa√ß√£o de texto.
  
--
  
### Websites (`blogdown`)

Disponibiliza v√°rias possibilidades de sites a serem criados em R Markdown.
  
  - [blogdown: Creating Websites with R Markdown](https://bookdown.org/yihui/blogdown/).

---
class: inverse, center, middle

# Algumas informa√ß√µes pr√©vias

## `setwd()`, R Markdown e Projetos

---
# Uso de setwd

Como dito pela engenheira do RStudio [@JennyBryan](https://twitter.com/JennyBryan) em uma confer√™ncia:

> If the first lines of your R script is
>
> `setwd("C:\Users\jenny\path\that\only\I\have")`

> `rm(list = ls())`
>
> I will come into your office and SET YOUR COMPUTER ON FIRE üî•.

--

<br>

Por n√£o serem boas pr√°ticas no contexto de reprodutibilidade:

- Outra pessoa precisaria alterar o caminho em `setwd()` (Voc√™ no futuro!);

- A chamada `rm(list = ls())` limpa somente os **objetos do ambiente**.

<br>

Para scripts uma alternativa ao `setwd()` √© o pacote `here`, explicado [aqui](https://github.com/jennybc/here_here).

---
## R Markdown

O R Markdown resolve estes problemas:

  - `setwd()`: Considera o `wd` como sendo o local aonde o arquivo .Rmd est√°;
  
  - `rm(list = ls())`: Quando compilado, √© rodado em um ambiente isolado, limpo.

--

## Projetos

Os projetos s√£o uma solu√ß√£o mais geral. Criados por `File -> New Project`.

Cria um arquivo **.RProj** na pasta, que isola um ambiente limpo do R.

Desta forma ao trocar entre projetos, os ambientes n√£o se misturam.

O Projeto tamb√©m considera o `wd` como sendo a localiza√ß√£o do **.RProj**.

---
# Texto exemplo

Texto que ser√° utilizado para "dar corpo" a documentos de exemplo:

>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.

<br>

Ser√° utilizado durante o resto da aula.

<br>

Se quiser, salve em um **.txt** e o mantenha aberto.

---
class: inverse, center, middle

# Instala√ß√£o e In√≠cio

---
# Instalando


A instala√ß√£o do pacote pode ser feita da maneira tradicional:

```{r eval=FALSE, tidy=FALSE}
install.packages("rmarkdown")
```

--

Ou, por meio do [Github](https://github.com/rstudio/rmarkdown):

```{r, eval=FALSE, tidy=FALSE}
install.packages("devtools")
devtools::install_github("rstudio/rmarkdown")
```

--

A segunda op√ß√£o instala a vers√£o de desenvolvedor a partir do Github.

Pode trazer melhorias ainda n√£o submetidas ao CRAN, assim como poss√≠veis bugs.

---

# Criando documentos

√â recomendado o uso do [RStudio IDE](https://www.rstudio.com/products/rstudio/), mas n√£o obrigat√≥rio.

O **RStudio** traz muitas facilidades como atalhos e comandos de compila√ß√£o.

--

- Crie um novo documento R Markdown no menu `File -> New File -> R Markdown`;
  
  - Cria um script com a estrutura j√° digitada.

```{r, echo=FALSE, out.height=200, out.width=200, fig.align='center'}
knitr::include_graphics("C:/Scripts R/aneisse/slides/rmd-tutorial/img/creation_frame.png")
```

--

- Clique no bot√£o `knit` para compilar o exemplo (`Ctrl + Shift + K`).
  
  - Roda o comando `rmarkdown::render()` em **nova sess√£o**;
  

---

# Metadados YAML

O cabe√ßalho de todo documento `.Rmd`.

Traz as informa√ß√µes usadas para renderizar o documento.

```{r, eval=FALSE}
---
title: "Documento Qualquer"
subtitle: "Exemplo de cabe√ßalho YAML"
author: "Anderson Neisse"
date: "23/02/2019"
output: 
  html_document:
    toc: true
  pdf_document:
    toc: false
---
```

--

YAML significa "Yet Another Markup Language".

√â uma linguagem que representa dados em formato de listas.

Usa **identa√ß√£o** para identificar n√≠veis de aninhamento.

---
# Op√ß√µes de formato

Existem basicamente dois tipos de R Markdown: Documento e Apresenta√ß√£o.

Na possibilidade de mais de um formato, o bot√£o `knit` mostrar√° op√ß√µes:

```{r, echo=FALSE, fig.align='center'}
knitr::include_graphics("https://bookdown.org/yihui/rmarkdown/images/format-dropdown.png")
```

--

Basicamente, o `output` do YAML √© alterado.

Pacotes extendem para novos formatos, como o `tufte` e o `rticles`.

O RStudio tem uma p√°gina de [Refer√™ncia de Formatos](https://rmarkdown.rstudio.com/formats.html).

---
class: inverse, center, middle

# Sintaxe Markdown

### A implementa√ß√£o Pandoc

---
# Defini√ß√£o de Se√ß√µes

A cria√ß√£o de se√ß√µes usa Markdown como base:

```{r}
# Se√ß√£o
```
# Se√ß√£o

```{r}
## Sub-se√ß√£o
```
## Subse√ß√£o

...e assim por diante.

--

A adi√ß√£o de `number_sections: true` abaixo do formato do documento no YAML enumera as se√ß√µes.

---
# Formata√ß√£o de texto

As principais funcionalidades s√£o:

  - **Negrito** usando `**Negrito**` ou `__Negrito__`;
  
  - *It√°lico* usando `*It√°lico*` ou `_It√°lico_`;
  
  - ~~Cortado~~ usando `~~Cortado~~`;
  
  - Linha horizontal: "---" 
  ---

O RStudio tem documento de [refer√™ncia de R Markdown](https://www.rstudio.com/wp-content/uploads/2015/03/rmarkdown-reference.pdf).

---
# Listas

Podemos criar listas com `-`, `+` ou `*`:

```{r, eval=FALSE}
  - Item 
    - Subitem
  - Outro item
```

  - Item 
    - Subitem
  - Outro item

--

Ou listas ordenadas com `1., 2., ...`:

```{r, eval=FALSE}
  1. Item
    + Subitem
  2. Outro item
```

  1. Item
    + Subitem
  2. Outro item

---
# Equa√ß√µes

Equa√ß√µes na linha podem ser escritas dentro de um par de cifr√µes `$` em LaTeX:

`${n \choose k} p^{k} (1-p)^{n-k}$` retorna ${n \choose k} p^{k} (1-p)^{n-k}$

--

Equa√ß√µes multi-linha devem ser envolas em cifr√µes duplos `$$`:

```{r, eval=FALSE}
$$
  {n \choose k} p^{k} (1-p)^{n-k}
$$
```

retorna

$${n \choose k} p^{k} (1-p)^{n-k}$$

---

# Tabelas

Para criar manualmente, com **Markdown**:

```{r, eval=FALSE}
                  |Coluna1|Coluna2|Coluna3|
                  |-------|:-----:|------:|
                  |   1   |   2   |   3   |
```

<br>

O que resulta em:

|Coluna1|Coluna2|Coluna3|
|-------|:-----:|------:|
|   1   |   2   |   3   |

<br><br>

Veremos como criar tabelas mais elaboradas com `kableExtra`.

---

# Figuras

Podemos inserir figuras locais (ou links da internet):

```{r, eval=FALSE}
![Figura](blackhole.jpg)
```

![Figura](blackhole.jpg)

---

# Texto em blocos e cita√ß√µes

Texto ap√≥s o operador `>` fica em um bloco:

```{r, eval=FALSE}
> "I thoroughly disapprove of duels. If a man should challenge me,
  I would take him kindly and forgivingly by the hand and lead him
  to a quiet place and kill him."
>
> --- Mark Twain
```

> "I thoroughly disapprove of duels. If a man should challenge me,
  I would take him kindly and forgivingly by the hand and lead him
  to a quiet place and kill him."
>
> --- Mark Twain

--

Ou blocos de c√≥digo em geral com identa√ß√£o de quatro `tabs`/`espa√ßos`:

```{r, eval=FALSE}
        Este texto ser√° gerado em fonte de c√≥digo
```


        Este texto ser√° gerado em fonte de c√≥digo.

---
class: inverse, center, middle

# C√≥digos e Resultados em R
### Chunks (Peda√ßos) de c√≥digo
---
# C√≥digos R - chunks

Todo c√≥digo multi-linha em R deve ser inserido em *chunks* (peda√ßos). 

```{r media, eval=FALSE}
#C√≥digo dentro de um chunk
mean(1:10)
```

--

### C√≥digo na linha (texto din√¢mico):
  
```{r}
# Texto anterior `r c√≥digo` texto posterior.
```

Este valor foi calculado na gera√ß√£o do documento com `mean(1:10)`: `r mean(1:10)`.

Permite muitas possibilidades de relat√≥rios din√¢micos.

---
# Op√ß√µes dos chunks

Existem op√ß√µes para c√≥digos no relat√≥rio:

  - `{r, echo = FALSE}`: N√£o mostra o c√≥digo, somente o resultado;
```{r, echo=FALSE}
mean(1:10)
```

  - `{r, eval = FALSE}`: N√£o roda o c√≥digo, s√≥ o mostrando;
```{r, eval=FALSE, }
mean(1:10)
```

  - `include = FALSE`: Remove tanto c√≥digo quanto resultados, mas roda;

  - `warning = FALSE` n√£o mostrar√° warnings no relat√≥rio compilado;
  
  - `message = FALSE` n√£o mostrar√° mensagens (carregamento de pacotes).
  
  - [V√°rias outras](https://yihui.name/knitr/options/).

---

# Tabelas

Podemos utilizar o pacote `kableExtra` para criar tabelas:

```{r}
tibble(Coluna1 = c(11, 12), Coluna2 = c(21, 22)) %>% 
  kableExtra::kable(align = c("r", "c"), 
                    caption = "Tabela 1: Exemplo de tabela")
```

--

Existe uma vantagem quanto ao m√©todo do **Markdown** pela customiza√ß√£o.

V√°rias op√ß√µes podem ser adicionadas, especialmente em HTML.

Todas as op√ß√µes para [HTML](http://haozhu233.github.io/kableExtra/awesome_table_in_html.html) e [PDF](http://haozhu233.github.io/kableExtra/awesome_table_in_pdf.pdf).
---

# Imagens

Gr√°ficos ser√£o mostrados logo abaixo do chunk:

```{r, out.width=300, out.height=300, fig.align='center'}
plot(1:10)
```

Tamb√©m podemos usar `knitr::include_graphics("caminho ou link")` para inserir figuras.

---
# Op√ß√µes de Imagens

Tamb√©m existem op√ß√µes de imagens dentro de `{r}`, como:

  - `out.height` e `out.width` ou `fig.dim = c(h, w)`: Ajusta dimens√µes da imagem no relat√≥rio.
  
  - `fig.align`: Ajusta alinhamento direito, esquero, centralizado;

  - `fig.cap`: Inser√ß√£o de t√≠tulo da imagem;
  
```{r, echo=FALSE, out.width=125, out.height=125, fig.align='center',fig.cap="Figura 1."}
plot(1:10)
```
  
  - `fig.pos`: Equivalente a posicionamento de figuras do LaTeX;
  

Outras op√ß√µes de figuras s√£o explicadas [aqui](https://bookdown.org/yihui/rmarkdown/r-code.html#figures).

---
# Outras linguagens

O RStudio faz API com outras linguagens instaladas.

Pode ser inseridos c√≥digos de outras linguagens como:

  - Python: {python}, usando o pacote `reticulate`;
  
  - SQL: {sql}, precisa de conex√£o com o BD;
  
  - JavaScript: {js}, ajuda a formatar documentos HTML;
  
  - [E outras](https://bookdown.org/yihui/rmarkdown/language-engines.html#javascript-and-css).

--

---
class: inverse, center, middle

# Introdu√ß√£o a Relat√≥rios Cient√≠ficos

### Alguns elementos importantes

---

### Abstract

O R markdown permite inclus√£o de abstract no YAML:

```{r, eval=FALSE}
abstract: "Texto aqui"
```

--

### Sum√°rio

```{r, eval=FALSE}
lang: pt-BR
pdf_document:
  toc: true
  toc_depth: 2
```

A op√ß√£o `toc_depth: 2` define a profundidade de se√ß√µes. E `lang: pt-BR` muda os t√≠tulos.

--

### Quebras de p√°gina

Quebras de p√°gina podem ser inseridas com comandos LaTex `\pagebreak` ou `\newpage`.

---

## Refer√™ncias

Utilizando a op√ß√£o do YAML `bibliography: referencias.bib`, pode-se utilizar a mec√¢nica do LaTeX.

Uma refer√™ncia √© especificada no `.bib` como:

```{r, eval=FALSE}
@book{casella,
  title={Statistical inference},
  author={Casella, George and Berger, Roger L},
  volume={2},
  year={2002},
  publisher={Duxbury Pacific Grove, CA}
}
```

Ent√£o, no `.Rmd`:
  - `[@casella]` resulta em  *(Casella e Berger 2002)*;
  - `@casella` resulta em *Casella e Berger (2002)*;
  - `[@casella; @bortolini]` resulta *(Casella e Berger 2002; Bortolini 2015)*.
  
Um  [arquivo de exemplo](referencias.bib) utilizado na apresenta√ß√£o.

---
# Cross-Reference

### A Se√ß√µes

Pode-se fazer refer√™ncias por link a se√ß√µes (PDF e HTML) da forma:

```{r}
# Nome da Se√ß√£o{id}
```

Ent√£o utilizando no texto: `[texto](id)`.

### Tabelas e Gr√°ficos

Podemos criar numera√ß√£o autom√°tica da forma:

  - Tabela: Definindo `kable(caption = "T√≠tulo")`;
  - Figura: Op√ß√£o `fig.cap = "T√≠tulo"` do chunk.
  
Definirmos uma label para o chunk `{r label}`, ent√£o podemos referenciar no texto como `\@ref(tab:label)` ou `\@ref(fig:label)`. [Mais detalhes](https://bookdown.org/yihui/bookdown/figures.html).

---
# Formatos de Artigo

O R Markdown permite criar facilmente relat√≥rios.

Detalhes espec√≠ficos de cada revista s√£o mais dif√≠ceis de se realizar.

Muitas revistas disponibilizam formato de artigos em Rmd.

--

<br>

Alguns exemplos:

  - UFPB: [Elabora√ß√£o de TCC em R Markdown](https://repositorio.ufpb.br/jspui/bitstream/tede/9034/2/arquivototal.pdf)
  
  - Royal Society of Statistics (`rticles`)
  
  - [Journal of Statistical Software](https://rmarkdown.rstudio.com/formats.html)
  

Muitos formatos s√£o distribu√≠dos pelo pacote `rticles`.

---
# Diferen√ßas PDF/HTML

### Identa√ß√£o

Em PDF usa-se o c√≥digo LaTeX `\indent`.

O HTML n√£o entende alguns c√≥digos de LaTeX, nesse caso um espa√ßo √© inserido por `&ensp;`.

### Justifica√ß√£o

Documentos gerados em PDF j√° justificam automaticamente.

O HTML precisa do c√≥digo abaixo inserido em qualquer parte do corpo:

```{r, eval=FALSE}
<style>
body{
text-align: justify
}
</style>
```

---
class: inverse, center, middle

# Fun√ß√µes do HTML

### Interatividade, Widgets e Shiny

---
# Sum√°rio

Em HTML existem possibilidades adicionais:
  
  - `toc_floating: true` para um sum√°rio fixado √† esquerda;
  
  - `toc_collapsed: true` para aninhar os subitens, mostrando quando chegar na se√ß√£o.

--

Naturalmente, estas op√ß√µes devem estar sob o tipo de documento no YAML:

```{r, eval=FALSE}
output:
  html_document: 
    toc: true
    toc_depth: 3
    number_sections: true
    toc_float: true
    toc_collapsed: false
```

---

# Code-folding
  
Em HTML √© poss√≠vel permitir oferecer a op√ß√£o de exibir o c√≥digo.

Pode ser √∫til para quando se quer enviar relat√≥rios com c√≥digo aberto.

Introduz um "bot√£o" para mostrar/esconder o c√≥digo.

--
<br>

Basta inserir:

```{r, eval=FALSE}
output:
  html_document: 
    code_folding: hide
```

para gerar o documento com os √≥digos escondidos por padr√£o. A op√ß√£o √© `code_folding: show`.

---

# Tabsets (abas)

Usando `{.tabset}` ao lado do nome de uma se√ß√£o, da forma:

    # T√≠tulo da se√ß√£o do Tabset{.tabset .tabset-pills}

    ## Primeira visualiza√ß√£o
    chunk de c√≥digo e/ou texto aqui

    ## Segunda visualiza√ß√£o
    chunk de c√≥digo e/ou texto aqui
Faz com que todas as suas subse√ß√µes virem abas que podem ser navegadas.

```{r, echo=FALSE, fig.align='center', out.height=200}
knitr::include_graphics("https://bookdown.org/yihui/rmarkdown/images/tabset.png")
```

A op√ß√£o `tabset-pills` d√° um visual diferente. [Mais detalhes](https://bookdown.org/yihui/rmarkdown/html-document.html#tabbed-sections).

---
# Widgets HTML

Os Widgets HTML s√£o implementados no R pelo pacote `htmlwidgets`.

O pacote usa JavaScript para criar gr√°ficos e tabelas interativas.

--

Pacotes resultantes desta interface s√£o:

  - `DT`: Cria tabelas interativas com filtros e pagina√ß√£o;
  
  - `plotly`: Gr√°ficos interativos a partir do `ggplot2`;
  
  - `leaflet`: Mapas din√¢micos; 

--

Podem ser incorporados em documentos e apresenta√ß√µes.

Mais pacotes de Widgets HTML podem ser encontrados [aqui](https://www.htmlwidgets.org/showcase_leaflet.html).


---
# Widgets HTML - `DT`

Para inserir data frames como Widget HTML basta inserir:

```{r, warning=FALSE}
library(DT)
datatable(iris, options = list(pageLength = 4))
```


Para mais tipos de op√ß√µes de formata√ß√£o da tabela, [aqui](http://rstudio.github.io/DT/).

---
# Widgets HTML - `leaflet`

Pacote frequentemente utilizado para criar mapas.

Outra op√ß√£o √© o `ggmap`, extens√£o do `ggplot2`, [aqui](https://github.com/dkahle/ggmap).

O c√≥digo abaixo usa o dataset `quake` para gerar um exemplo.

```{r, eval=FALSE, warning=FALSE, message=FALSE}
library(leaflet)
leaflet(quakes) %>% addTiles() %>% 
  addMarkers(clusterOptions = markerClusterOptions())
```

Para mais detalhes em diferentes formas de plots em `leaflet`, [aqui](https://rpubs.com/mattdray/basic-leaflet-maps).

---
# Widgets HTML - `leaflet`

```{r, echo=FALSE, warning=FALSE, message=FALSE, fig.align='center'}
library(leaflet)
leaflet(quakes) %>% addTiles() %>% 
  addMarkers(clusterOptions = markerClusterOptions())
```

---

# Widgets HTML - `plotly`

Pacote mais utilizado para gr√°ficos inteativos. Possui biblioteca no python tamb√©m.

Gera um gr√°fico interativo em HTML a partir do `ggplot2`.

--

Deve-se gerar o gr√°fico no `ggplot2`:

```{r}
library(ggplot2)
g <- ggplot(iris, aes(x = Petal.Length, y = Petal.Width)) +
  geom_point(aes(color = Species)) + 
  labs(title = "Tamanho da p√©tala por esp√©cie de flor", 
       x = "Comprimento", y = "Largura", color = "Esp√©cie") + 
  theme_bw()
```

--

Ent√£o utilizar a fun√ß√£o `plotly::ggplotly()` no gr√°fico:

```{r, eval=FALSE}
library(plotly)
ggplotly(g)
```

Mais sobre gr√°ficos com `plotly` pode ser encontrado [aqui](https://plot.ly/r/).

---
# Widgets HTML - `plotly`

```{r, echo=FALSE, warning=FALSE, message=FALSE, error=FALSE}
library(plotly)
ggplotly(g)
```

---

## Documentos Shiny

Shiny √© uma biblioteca focada em criar dashboards interativos.

```{r, eval=FALSE}
---
title: "Um Documento com Shiny"
output:
  html_document: default
runtime: shiny
---
# C√≥digo abaixo isnerido em chunks
selectInput(
  'breaks', label = 'Number of bins:',
  choices = c(10, 20, 35, 50), selected = 20)

renderPlot({
  par(mar = c(4, 4, .1, .5))
  hist(
    faithful$eruptions, as.numeric(input$breaks),
    col = 'gray', border = 'white',
    xlab = 'Duration (minutes)', main = '')
})
```

Mais informa√ß√µes em [Shiny](https://shiny.rstudio.com/tutorial/) e tamb√©m [Shiny com R markdown](https://bookdown.org/yihui/rmarkdown/shiny-documents.html). 

---
# Documentos Shiny

O exemplo do slide anterior gera:

```{r, echo=FALSE, fig.align='center', out.height=425, out.width=500}
knitr::include_graphics("C:/Scripts R/aneisse/slides/rmd-tutorial/img/shiny.png")
```

--


Com conex√£o √† internet, podemos ver exemplos [na pr√°tica](https://shiny.rstudio.com/gallery/movie-explorer.html).

---
class: inverse, center, middle

# Apresenta√ß√µes em R markdown

## Xaringan e alternativas

---

# Apresenta√ß√µes

Para documentos em geral, as unidades s√£o as se√ß√µes.

Em apresenta√ß√µes elas se tornam os slides. Os formatatos dispon√≠veis s√£o:

  - [IO Slides](https://bookdown.org/yihui/rmarkdown/ioslides-presentation.html): Em HTML, definindo `output: ioslides_presentation`;
  
  - [Slidy](https://bookdown.org/yihui/rmarkdown/slidy-presentation.html): Tamb√©m em HTML usando `output: slidy_presentation`;
  
  - [Beamer](https://bookdown.org/yihui/rmarkdown/beamer-presentation.html): Em PDF com `output: beamer_presentation`;
  
  - [PowerPoint](https://bookdown.org/yihui/rmarkdown/powerpoint-presentation.html): Com `output: powerpoint_presentation` no YAML. 
  
--
<br>,

O pacote `xaringan` introduz uma op√ß√£o que usa [remark.js](https://remarkjs.com), uma biblioteca de JavaScript. 

A cria√ß√£o da apresenta√ß√£o √© feita por: `New R Markdown -> From Template -> Presentation Ninja`.

Que cria um arquivo com uma apresenta√ß√£o pr√©-digitada pela autora, apresentando e dando um tutorial . [Mais informa√ß√µes](https://bookdown.org/yihui/rmarkdown/xaringan.html).

---
class: inverse, center, middle

# Websites em R markdown

### Blogdown e Ferramentas necess√°rias

---
## Websites em R Markdown

O pacote `bookdown` introduz a cria√ß√£o de sites usando R markdown.

O [livro do pacote](https://bookdown.org/yihui/blogdown/) prop√µe diversas formas. O sugerido √© usar o `blogdown` em conjunto com o [GitHub](https://github.com/) e o [Netlify](https://www.netlify.com/). Basicamente:

  - Escolher o [tema Hugo](https://themes.gohugo.io/) e obter o reposit√≥rio do GitHub "autor/repositorio";
  
  - Criar projeto `Website using blogdown` fornecendo "autor/repositorio";
  
  - Alterar e ver resultados "aovivo" com `Addins -> Serve site`;
  
  - Fazer upload do seu site para um reposit√≥rio do GitHub;
  
  - Fazer o deploy do site pelo Netlify.

--
<br>
O GitHub permite criar vers√µes de testes e o Netlify permite testar estas vers√µes.

Um [tutorial completo](https://gohugo.io/hosting-and-deployment/hosting-on-netlify/) utilizando esta abordagem.

O Netlify gera um link aleat√≥rio, mas permite inser√ß√£o de dom√≠nios comprados.

---

class: left

# Refer√™ncias

- Allaire, J. J., Ushey, K., Tang, Y., Eddelbuettel, D., Lewis, B., & Geelnard, M. (2018). reticulate: interface to‚ÄôPython‚Äô. R package version, 1(8).

- Bion, Ricardo, Robert Chang, and Jason Goodman. "How R helps Airbnb make the most of its data." The American Statistician 72.1 (2018): 46-52.

- Cheng, J., Karambelkar, B., Xie, Y., Wickham, H., Russell, K., & Johnson, K. (2018). Leaflet: create interactive web maps with the JavaScript ‚ÄúLeaflet‚Äù Library [Internet]. 2017.

- Knuth, Donald E. 1984. ‚ÄúLiterate Programming.‚Äù The Computer Journal 27 (2). British Computer Society: 97‚Äì111.

- Wickham, Hadley. ggplot2: elegant graphics for data analysis. Springer, 2016.

- Xie, Yihui, Joseph J. Allaire, and Garrett Grolemund. R markdown: The definitive guide. CRC Press, 2018. [Dispon√≠vel online](https://bookdown.org/yihui/rmarkdown/).

---

class: center, middle

# Obrigado!



Apresenta√ß√£o criada com o pacote [**xaringan**](https://github.com/yihui/xaringan).

[aneisse.com](https://aneisse.com/)

Twitter: [@a_neisse](https://twitter.com/a_neisse)

LinkedIn: [anderson-neisse](https://www.linkedin.com/in/anderson-neisse/)

C√≥digo da apresenta√ß√£o no [Github](https://github.com/aneisse/tutorial-rmarkdown)
